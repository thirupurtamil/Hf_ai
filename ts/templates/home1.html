<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="refresh" content="30">
    <title>Home1 - NSE Derivatives</title>

    <style>
        ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #333;
        }

        li {
            float: left;
        }

        li a {
            display: block;
            color: white;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
        }

        li a:hover {
            background-color: #111;
        }

        table {
            border-collapse: collapse;
            width: 100%;
        }

        table, td, th {
            border: 1px solid;
        }

        thead {
            background-color: hsla(89, 43%, 51%, 0.3);
        }

        th, td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #DDD;
        }

        tr:hover {
            background-color: #D6EEEE;
        }
    </style>
</head>
<body>
    <!-- ðŸ”¹ Navigation Menu -->
    <ul>
        <li><a class="active" href="/home/">Home</a></li>
        <li><a href="/home/acb/">ACB</a></li>
        <li><a href="/home/n50/">N50</a></li>
        <li><a href="/home/homepage/">NIFTY</a></li>
        <li><a href="/get_pa/">PA</a></li>
    </ul>

    <div>
        <h2>NSE Derivatives</h2>
    </div>

    <!-- ðŸ”¹ Chart Section -->
    <div>
        <canvas id="myChart"></canvas>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>

    <script>
        var labels = [
            '{{a1}}/{{aa1}}','{{a2}}/{{aa2}}','{{a3}}/{{aa3}}','{{a4}}/{{aa4}}',
            '{{a5}}/{{aa5}}','{{a6}}/{{aa6}}','{{a7}}/{{aa7}}','{{a8}}/{{aa8}}',
            '{{a9}}/{{aa9}}','{{a10}}/{{aa10}}','{{a11}}/{{aa11}}','{{a12}}/{{aa12}}',
            '{{a13}}/{{aa13}}','{{a14}}/{{aa14}}'
        ];

        const ctx = document.getElementById('myChart');
        Chart.register(ChartDataLabels);

        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    data: [{{ d1 }}, {{ d2 }}, {{ d3 }}, {{ d4 }}, {{ d5 }}, {{ d6 }},
                           {{ d7 }}, {{ d8 }}, {{ d9 }}, {{ d10 }}, {{ d11 }}, {{ d12 }},
                           {{ d13 }}, {{ d14 }}],
                    label: 'NIFTY50',
                    backgroundColor: function (context) {
                        var labelName = context.chart.data.labels[context.dataIndex];
                        if (labelName.includes("Call")) {
                            return 'green';
                        }
                        return 'red';
                    },
                    borderWidth: 3,
                    borderColor: 'black'
                }]
            },
            options: {
                plugins: {
                    title: {
                        display: true,
                        text: 'VOLUME',
                        color: 'blue',
                        font: { weight: 'bold', size: 20 }
                    },
                    datalabels: {
                        anchor: 'end',
                        align: 'end',
                        color: 'blue',
                        font: { weight: 'bold' },
                        formatter: function (value) { return value; }
                    }
                }
            }
        });
    </script>

    <!-- ðŸ”¹ Data Table -->
    <div>
        <br />
        {% block content %}
        <br />

        <div>
            <h2>ACB : {{n50}}[{{n56}}] ,{{raj}}. ,F[{{nft}}][{{n55}}]</h2>
            <br />

            <!-- Table 1 -->
            <table>
                <thead>
                    <tr>
                        <th>S.NO</th><th>TYPE</th><th>OPTION</th><th>OPEN</th>
                        <th>HIGH</th><th>LOW</th><th>LTP</th><th>CLOSE</th>
                        <th>OI</th><th>VOLUME</th><th>VALUE</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- rows with {{aq1}}, {{aaq1}}, etc. -->
                </tbody>
            </table>

            <br />
            <h2>P:{{pre}} PH: {{hpre}} PL: {{lpre}}</h2>
            <br />

            <!-- Table 2 -->
            <table>
                <thead>
                    <tr>
                        <th>LIVE</th><th>CHNG CALL</th><th>CHNG PUT</th>
                        <th>CALL</th><th>PUT</th><th>UP</th><th>DOWN</th><th>RANGE</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>{{ops1}}</td>
                        <td>{{ops2}}</td>
                        <td>{{tamil}}</td>
                        <td>{{tamil1}}</td>
                        <td>{{t1}}</td>
                        <td>{{t2}}</td>
                        <td>{{tt}}</td>
                    </tr>
                </tbody>
            </table>
            <br />
        </div>
        {% endblock content %}
    </div>
</body>
</html>